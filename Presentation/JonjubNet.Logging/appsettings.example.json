{
  "StructuredLogging": {
    "Enabled": true,
    "MinimumLevel": "Information",
    "ServiceName": "MiServicio",
    "Environment": "Development",
    "Version": "1.0.0",
    "Sinks": {
      "EnableConsole": true,
      "EnableFile": true,
      "EnableHttp": false,
      "EnableElasticsearch": false,
      "File": {
        "Path": "logs/log-.txt",
        "RollingInterval": "Day",
        "RetainedFileCountLimit": 30,
        "FileSizeLimitBytes": 104857600,
        "OutputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] {Message:lj}{NewLine}{Exception}"
      },
      "Http": {
        "Url": "https://mi-servidor-logs.com/api/logs",
        "ContentType": "application/json",
        "BatchPostingLimit": 100,
        "PeriodSeconds": 2,
        "Headers": {
          "Authorization": "Bearer token123"
        }
      },
      "Elasticsearch": {
        "Url": "http://localhost:9200",
        "IndexFormat": "logs-{0:yyyy.MM.dd}",
        "Username": "elastic",
        "Password": "password",
        "EnableAuthentication": true
      }
    },
    "Filters": {
      "ExcludedCategories": ["Debug", "Trace"],
      "ExcludedOperations": ["HealthCheck"],
      "ExcludedUsers": ["System"],
      "FilterByLogLevel": true,
      "CategoryLogLevels": {
        "Security": "Warning",
        "Performance": "Information"
      }
    },
    "Enrichment": {
      "IncludeEnvironment": true,
      "IncludeProcess": true,
      "IncludeThread": true,
      "IncludeMachineName": true,
      "IncludeServiceInfo": true,
      "StaticProperties": {
        "Application": "MiAplicacion",
        "Region": "us-east-1"
      },
      "HttpCapture": {
        "IncludeRequestHeaders": true,
        "IncludeResponseHeaders": false,
        "IncludeQueryString": true,
        "IncludeRequestBody": false,
        "IncludeResponseBody": false,
        "MaxBodySizeBytes": 10240,
        "SensitiveHeaders": [
          "Authorization",
          "Cookie",
          "X-API-Key",
          "X-Auth-Token"
        ]
      }
    },
    "Correlation": {
      "EnableCorrelationId": true,
      "EnableRequestId": true,
      "EnableSessionId": true,
      "CorrelationIdHeader": "X-Correlation-ID",
      "RequestIdHeader": "X-Request-ID",
      "SessionIdHeader": "X-Session-ID"
    },
    "KafkaProducer": {
      "Enabled": false,
      "ProducerUrl": "http://localhost:8080/api/logs",
      "Topic": "structured-logs",
      "TimeoutSeconds": 5,
      "BatchSize": 100,
      "LingerMs": 5,
      "RetryCount": 3,
      "EnableCompression": true,
      "CompressionType": "gzip",
      "Headers": {
        "Content-Type": "application/json"
      }
    },
    "Sampling": {
      "Enabled": false,
      "SamplingRates": {
        "Debug": 0.01,
        "Information": 0.1,
        "Trace": 0.001
      },
      "MaxLogsPerMinute": {
        "Information": 1000,
        "Debug": 500
      },
      "NeverSampleCategories": ["Security", "Audit", "Error", "Critical"],
      "NeverSampleLevels": ["Error", "Critical"]
    },
    "DataSanitization": {
      "Enabled": true,
      "SensitivePropertyNames": [
        "Password",
        "Passwd",
        "Pwd",
        "CreditCard",
        "CardNumber",
        "CCNumber",
        "SSN",
        "SocialSecurityNumber",
        "Email",
        "EmailAddress",
        "Phone",
        "PhoneNumber",
        "Mobile",
        "Token",
        "AccessToken",
        "RefreshToken",
        "ApiKey",
        "Secret",
        "SecretKey",
        "Authorization",
        "AuthToken"
      ],
      "SensitivePatterns": [
        "\\b\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}\\b",
        "\\b\\d{3}-\\d{2}-\\d{4}\\b",
        "\\b\\d{3}\\.\\d{3}\\.\\d{4}\\b"
      ],
      "MaskValue": "***REDACTED***",
      "MaskPartial": true,
      "PartialMaskLength": 4
    },
    "CircuitBreaker": {
      "Enabled": true,
      "Default": {
        "FailureThreshold": 5,
        "OpenTimeout": "00:01:00",
        "HalfOpenTestCount": 3
      },
      "PerSink": {
        "Http": {
          "Enabled": true,
          "FailureThreshold": 3,
          "OpenTimeout": "00:00:30"
        },
        "Elasticsearch": {
          "Enabled": true,
          "FailureThreshold": 5,
          "OpenTimeout": "00:02:00"
        }
      }
    },
    "RetryPolicy": {
      "Enabled": true,
      "Default": {
        "Strategy": "ExponentialBackoff",
        "MaxRetries": 3,
        "InitialDelay": "00:00:01",
        "MaxDelay": "00:00:30",
        "BackoffMultiplier": 2.0
      },
      "PerSink": {
        "Http": {
          "Enabled": true,
          "Strategy": "FixedDelay",
          "MaxRetries": 5,
          "InitialDelay": "00:00:02"
        },
        "Elasticsearch": {
          "Enabled": true,
          "Strategy": "ExponentialBackoff",
          "MaxRetries": 3,
          "InitialDelay": "00:00:01"
        }
      },
      "NonRetryableExceptions": [
        "System.ArgumentException",
        "System.UnauthorizedAccessException",
        "System.ArgumentNullException"
      ]
    },
    "DeadLetterQueue": {
      "Enabled": true,
      "MaxSize": 10000,
      "RetryInterval": "00:05:00",
      "MaxRetriesPerItem": 10,
      "ItemRetentionPeriod": "7.00:00:00",
      "AutoRetry": true,
      "Storage": "InMemory",
      "PersistencePath": null
    },
    "Batching": {
      "Enabled": true,
      "DefaultBatchSize": 100,
      "MaxBatchIntervalMs": 1000,
      "BatchSizeBySink": {
        "Http": 200,
        "Elasticsearch": 500,
        "Kafka": 1000
      },
      "EnableCompression": false,
      "CompressionLevel": "Optimal",
      "EnablePriorityQueues": false,
      "QueueCapacityByPriority": {
        "Critical": 10000,
        "Error": 5000,
        "Warning": 3000,
        "Information": 2000,
        "Debug": 1000,
        "Trace": 500
      },
      "EnablePriorityProcessing": false,
      "CriticalProcessingIntervalMs": 100,
      "NormalProcessingIntervalMs": 1000
    },
    "Security": {
      "EncryptionInTransit": {
        "Enabled": true,
        "RequireTls": true,
        "MinimumTlsVersion": "1.2",
        "ClientCertificatePath": null,
        "ClientCertificatePassword": null,
        "ValidateServerCertificate": true,
        "CustomRootCertificatesPath": null
      },
      "EncryptionAtRest": {
        "Enabled": false,
        "EncryptionAlgorithm": "AES256",
        "EncryptionKeyPath": "keys/encryption.key",
        "EncryptionKeyPassword": null,
        "EnableKeyRotation": false,
        "KeyRotationIntervalDays": 90,
        "PreviousKeysPath": "keys/previous"
      },
      "Audit": {
        "Enabled": true,
        "LogConfigurationChanges": true,
        "LogSensitiveAccess": true,
        "SensitiveCategories": ["Security", "Audit"],
        "SensitiveLevels": ["Error", "Critical"],
        "EnableComplianceTracking": false,
        "ComplianceStandards": [],
        "AuditLogPath": null
      }
    }
  }
}
